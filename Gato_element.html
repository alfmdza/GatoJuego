<html>

<body>
    <h1></h1>
    <gato-component></gato-component>
</body>

</html>
<script>
    // Create a class for the element
    class Gato extends HTMLElement {
        constructor() {
            // Always call super first in constructor

            let XO = prompt("Por favor ingresa X o O");

            XO = XO.toUpperCase();
            console.log(XO)

            let player1;
            let player2;
            let partidaplayer1=true;
            let partidaplayer2=false;

            if (XO === "X" || XO === "O") {
                super();

                // Create a shadow root
                const shadow = this.attachShadow({ mode: 'open' });

                const title = document.createElement("h1");
                title.setAttribute("class", "title");
                title.textContent = "Juego Gato";

                const table = document.createElement('div');
                table.setAttribute('class', 'table');
                const row = document.createElement('div');
                row.setAttribute('class', 'row');

                let buttons = [];

                const rows = [];

                let m = 3;
                let n = 3;

                let count = -1;

                for (let j = 0; j < m; j++) {
                    count++
                    //console.log(j)
                    rows.push(document.createElement("div"));
                    rows[j].setAttribute('class', 'row');
                    rows[j].setAttribute('id', 'rowid' + j);
                    table.appendChild(rows[j]);


                    if (j === count) {
                        //console.log(rows[j])
                        //console.log(count)
                        for (let k = 0; k < n; k++) {
                            //console.log(rows[j])

                            let boton = document.createElement("button");
                            boton.setAttribute("class", "button");
                            boton.setAttribute("id", j + "," + k);
                            boton.setAttribute("type", "button");
                            //boton.textContent = j+"-"+k
                            boton.textContent = '-';
                            boton.addEventListener("click", clickBoton);

                            rows[j].appendChild(boton);

                        }

                    }


                }

                function clickBoton(e) {

                    let b = e.target;
                    console.log(b);
                    console.log(XO);
                    player1=XO;

                    if(player1==='X'){
                        player1=XO;
                        player2='O';
                    }else if(player1==='O'){
                        player1=XO;
                        player2='X';
                    }  

                    if(partidaplayer1 === true){
                        b.value = player1
                        b.textContent = player1
                        partidaplayer1 = false
                        partidaplayer2 = true
                        console.log(player1)
                        console.log(player2)

                    }else if(partidaplayer2 === true){
                        b.value = player2
                        b.textContent = player2
                        partidaplayer2 = false
                        partidaplayer1 = true
                        console.log(player1)
                        console.log(player2)

                    }

                    



                }
                function toUpperCasePromt(e) {

                    console.log(e.target)
                    let x = e.target;


                    console.log(x.value)



                }




                console.log(buttons)
                console.log(rows)



                const style = document.createElement('style');

                style.textContent = `
                .table {
                    display: table;
                    width:100%
                    }
                .row { display: table-row; }
                .cell { display: table-cell; border: solid 1px; widht: 100px;}
                .title{
                    position: absolute
                    }
                .button {
                    background-color: #4CAF50; /* Green */
                    border: none;
                    color: white;
                    padding: 15px 32px;
                    text-align: center;
                    text-decoration: none;
                    display: inline-block;
                    font-size: 16px;
                    border: solid 1px;
                    }
                    `;


                shadow.appendChild(style);

                shadow.appendChild(title);


                shadow.appendChild(title)
                title.appendChild(table)


            } else {
                alert("Refresca tu pÃ¡gina, para volver a iniciar, el valor insertado no es el correcto")
                console.log("no es el valor")
            }




        }
    }

    // Define the new element
    customElements.define('gato-component', Gato);
</script>