<html>

<body>
    <h1></h1>
    <gato-component></gato-component>
</body>

</html>
<script>
    // Create a class for the element
    class Gato extends HTMLElement {
        constructor() {
            // Always call super first in constructor

            super();

            let tamano = 3//prompt("Ingresa el numero");
            let arreglo = new Array();

            const shadow = this.attachShadow({ mode: 'open' });
            const title = document.createElement("h1");
            title.setAttribute("class", "title");
            title.textContent = "Juego del Gato";

            const table = document.createElement('div');
            table.setAttribute('class', 'table');

            if (tamano >= 3) {

                let letraElegida = 'X'//prompt("Por favor ingresa X o O");

                letraElegida = letraElegida.toUpperCase();
                //console.log(letraElegida)

                let player1;
                let player2;
                let partidaplayer1 = true;
                let partidaplayer2 = false;

                if (letraElegida === "X" || letraElegida === "O") {

                    player1 = letraElegida;

                    if (player1 === 'X') {
                        player2 = 'O';
                    } else if (player1 === 'O') {
                        player2 = 'X';
                    }

                    
                    for (let i = 0; i < tamano; i++) {
                        arreglo[i] = new Array();



                        for (let j = 0; j < tamano; j++) {
                        	arreglo[i][j] = i+","+j;
                            let button = document.createElement("button");
                            button.setAttribute("class", "button");
                            button.textContent = "-"
                            button.addEventListener("click", function() {
                            	//verifica(arreglo[i][j]);
                            	if (partidaplayer1 === true) {
                            		arreglo[i][j]=player1
                            		button.textContent=player1
                            		verifica();
                            		partidaplayer1 = false;
                            		partidaplayer2 = true;
                            		//console.log(player1)
                            	} else if (partidaplayer2 === true) {
                            		arreglo[i][j]=player2
                            		button.textContent=player2
                            		verifica();
                            		partidaplayer2 = false;
                            		partidaplayer1 = true;
                            		//console.log(player2)
                            	}

                            	
                            });
                            

                            table.appendChild(button)

                        }

                    }



                }

                function verifica() {
                	let countX=0
                	let countO=0
                    for (let i = 0; i < arreglo.length; i++) {
                    	console.log(arreglo[i])
                    	for(let k=0; k<arreglo[i].length; k++){
                    		console.log(arreglo[i][k])
                    		if(arreglo[i][k]==='X'){
                    			countX +=1

                    			if(countX===3){
                    				console.log("GANASTE X")
                    			}

                    		}else if(arreglo[i][k]==='O'){
                    			countO +=1

                    			if(countO===3){
                    				console.log("GANASTE O")
                    			}

                    		}
                    		console.log("countX"+countX)
                    		console.log("countO"+countO)
                        }

                        countX=0
                        countO=0
                        

                        for (let j = 0; j < arreglo.length; j++) {

                        }

                    }
                    console.log(arreglo)

                }
  
            } else {
                alert("No ingresaste ningun numero, reload pÃ¡gina")
            }

            const style = document.createElement('style');

            style.textContent = `
                .table {
                    display: table;
                    width:100%
                    }
                .row { display: table-row; }
                .cell { display: table-cell; border: solid 1px; widht: 100px;}
                .title{
                    position: absolute
                    }
                .button {
                    background-color: #4CAF50; /* Green */
                    border: none;
                    color: white;
                    padding: 15px 32px;
                    text-align: center;
                    text-decoration: none;
                    display: inline-block;
                    font-size: 16px;
                    border: solid 1px;
                    }
                    `;

            shadow.appendChild(style);
            shadow.appendChild(title)
            title.appendChild(table)







        }
    }

    // Define the new element
    customElements.define('gato-component', Gato);
</script>