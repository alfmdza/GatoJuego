<html>

<body>
    <h1></h1>
    <gato-component></gato-component>
</body>

</html>
<script>
    // Create a class for the element
    class Gato extends HTMLElement {
        constructor() {
            // Always call super first in constructor

            super();

            let nm = 3//prompt("Ingresa el numero");
            let arreglo = new Array();

            let a;

            // Create a shadow root
            const shadow = this.attachShadow({ mode: 'open' });
            const title = document.createElement("h1");
            title.setAttribute("class", "title");
            title.textContent = "Juego del Gato";

            const table = document.createElement('div');
            table.setAttribute('class', 'table');
            //const row = document.createElement('div');
            //row.setAttribute('class', 'row');

            if (nm >= 3) {

                let XO = 'X'//prompt("Por favor ingresa X o O");

                XO = XO.toUpperCase();
                //console.log(XO)

                let player1;
                let player2;
                let partidaplayer1 = true;
                let partidaplayer2 = false;

                if (XO === "X" || XO === "O") {
                    for (let i = 0; i < nm; i++) {
                        arreglo[i] = new Array();



                        for (let j = 0; j < nm; j++) {
                            let button = document.createElement("button");
                            button.value = i + "," + j;
                            button.setAttribute("class", "button");
                            button.addEventListener("click", clickBoton);
                            button.textContent = "-"
                            arreglo[i][j] = button//i+","+j;

                            table.appendChild(button)

                        }

                    }



                }


                function clickBoton(e) {

                    //console.log(e.target)

                    a = e.target

                    //let b = e.target;
                    //console.log(b);
                    //console.log(XO);
                    player1 = XO;

                    if (player1 === 'X') {
                        player1 = XO;
                        player2 = 'O';
                    } else if (player1 === 'O') {
                        player1 = XO;
                        player2 = 'X';
                    }

                    if (partidaplayer1 === true) {
                        //b.value = player1;
                        a.textContent = player1;
                        partidaplayer1 = false;
                        partidaplayer2 = true;
                        //console.log(player1);
                        //console.log(player2);
                        //verifica(a, player1)
                        console.log(a)
                        console.log(player1)



                    } else if (partidaplayer2 === true) {
                        //b.value = player2;
                        a.textContent = player2;
                        partidaplayer2 = false;
                        partidaplayer1 = true;
                        //sverifica(a, player2)
                        //console.log(player1);
                        //console.log(player2);
                        console.log(a)
                        console.log(player2)

                    }

                    
                    


                }

                function verifica(a, player) {
                    console.log("verifica valor: "+ a)
                    console.log("verifica valor: "+ player)
                    for (let i = 0; i < nm; i++) {
                        arreglo[i] = new Array();

                        for (let j = 0; j < nm; j++) {

                            arreglo[i][j] = i + "," + j;

                            console.log(arreglo[i][j])

                            if(arreglo[i][j]===a){
                                arreglo[i][j]=player
                            }
                            console.log(arreglo[i][j])

                        }

                    }

                }







                console.log(arreglo)
            } else {
                alert("No ingresaste ningun numero, reload pÃ¡gina")
            }




            const style = document.createElement('style');

            style.textContent = `
                .table {
                    display: table;
                    width:100%
                    }
                .row { display: table-row; }
                .cell { display: table-cell; border: solid 1px; widht: 100px;}
                .title{
                    position: absolute
                    }
                .button {
                    background-color: #4CAF50; /* Green */
                    border: none;
                    color: white;
                    padding: 15px 32px;
                    text-align: center;
                    text-decoration: none;
                    display: inline-block;
                    font-size: 16px;
                    border: solid 1px;
                    }
                    `;


            shadow.appendChild(style);


            shadow.appendChild(title)
            title.appendChild(table)







        }
    }

    // Define the new element
    customElements.define('gato-component', Gato);
</script>